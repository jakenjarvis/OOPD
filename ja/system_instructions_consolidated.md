## オブジェクト指向型汎用プロンプト用語定義 (Object-Oriented Terminology for Prompt Design)

この章は、AIがオブジェクト指向プログラミング (OOP) の概念を**プロンプトの構造化と解釈のために**利用するための **最重要** 用語定義です。以下の定義は、**プロンプトの記述とAIの応答生成における思考フレームワーク**として使用されます。プロンプトを解釈し、必要に応じてOOPの原則を適用して、より構造的で一貫性のある応答を生成するために利用してください。

### クラス (Class)

- 定義: オブジェクトの設計図。
- 重要ポイント:
  - オブジェクトの種類を定義。
  - 複数のオブジェクトを作成可能。
- 例: `犬 (Dog)` クラス。動物の種類を定義する。この設計図から、様々な名前や特徴を持つ犬のオブジェクト（インスタンス）を生成できる。

### オブジェクト (Object)

- 定義: クラスから生成された実体。
- 重要ポイント:
  - クラスを基に生成。
  - 状態と振る舞いを持つ。
  - 「犬」という種類の概念を指す。
- 例: `ポチ (Pochi)` は `犬 (Dog)` クラスのオブジェクト。名前、年齢、毛色などの情報を持つ。

### インスタンス (Instance)

- 定義: クラスという設計図を基に、実際に作られた個別の実体。(オブジェクトとほぼ同義)
- 重要ポイント:
  - クラスを基に生成。
  - 状態と振る舞いを持つ。
  - 「ポチ」という具体的な犬を指す。
- 例: `ポチ (Pochi)` は `犬 (Dog)` クラスのインスタンス。具体的に「ポチ」という名前の犬を指し、それぞれ異なる状態を持つことができる。

### プロパティ (Property)

- 定義: オブジェクトが持つ属性。
- 重要ポイント:
  - オブジェクトの状態を表す。
- 例: `犬 (Dog)` クラスの `名前 (Name)` プロパティ。犬の名前を格納する。

### メソッド (Method)

- 定義: オブジェクトが行う動作。
- 重要ポイント:
  - オブジェクトの振る舞いを定義。
- 例: `犬 (Dog)` クラスの `吠える (Bark)` メソッド。犬が吠える動作を定義する。

### 型 (Type)

- 定義: データの種類。
- 重要ポイント:
  - プロパティや引数の種類を指定。
  - 整合性を高める。
- 例:
  - `アイテムID (整数型)`: アイテムIDは整数型である。数値のみを格納できる。
  - `アイテムリスト: アイテムクラスのインスタンスのリスト`: アイテムリストは、アイテムクラスのインスタンスのリストである。複数のアイテムオブジェクトをまとめて管理できる。
  - `アイテムを追加(アイテム: アイテムクラスのインスタンス): 真偽値`: アイテムを追加メソッドは、アイテムクラスのインスタンスを引数に取り、真偽値を返す。アイテムを追加できたかどうかを真偽値で返す。
  - 補足:
    - 型を指定する際には、以下の記法を用いることを推奨します。
      - `変数名 (型)`
      - `プロパティ名: 型`
      - `メソッド名(引数名: 型): 戻り値の型`

### インターフェース (Interface)

- 定義: クラスが実装すべき契約。
- 重要ポイント:
  - 振る舞いを規定。
  - 疎結合を実現。
- 例: `移動可能 (Movable)` インターフェース。`移動する (Move)` メソッドを実装する必要がある。

### イベント (Event)

- 定義: オブジェクト内で発生する出来事。
- 重要ポイント:
  - 状態変化や刺激。
  - イベントハンドラを実行。
- 例: `空腹 (Hungry)` イベント。犬がお腹が空いたときに発生するイベント。

### コンポジション (Composition)

- 定義: クラスが別のクラスを持つ関係。
- 重要ポイント:
  - 強い関連性 (has-a)。
  - ライフサイクルを共有。
- 例: `書籍 (Book)` と `ページ (Page)`。書籍はページがなければ成立しない。ページは書籍の一部であり、書籍が破棄されればページも通常は意味をなさなくなる。

### 集約 (Aggregation)

- 定義: クラスが別のクラスを持つ関係。
- 重要ポイント:
  - 弱い関連性 (has-a)。
  - ライフサイクルは独立。
- 例: `劇団 (TheaterGroup)` と `役者 (Actor)`。劇団は役者がいなくても存在しうる。役者は劇団に所属していなくても役者として活動できる。

### サブクラス (Subclass) と継承 (Inheritance)

- 定義: クラスが別のクラスを継承すること。
- 重要ポイント:
  - 継承は可能な限り避ける。
  - コンポジション/集約を推奨。

### ネームスペース (Namespace)

- 定義:  クラスやオブジェクトなどの識別子の名前空間を提供する仕組み。
- 重要ポイント:
  - **名前の衝突を回避:**  同じ名前のクラスやオブジェクトを異なるネームスペースに定義することで、名前の衝突を防ぎ、区別して扱うことができる。
  - **コードの整理と可読性向上:**  関連性の高いクラスやオブジェクトをネームスペースでまとめることで、コードを整理し、可読性を向上させる。
  - **モジュール性向上:**  ネームスペースによって機能ごとにモジュールを分割することが可能になり、再利用性や保守性が向上する。

### AIへの適用に関する指示 (特に重要)

このドキュメントにおけるオブジェクト指向の概念は、**プロンプトの意図を理解し、構造化された一貫性のある応答を生成するためのツール** です。以下の指針と原則は、**このドキュメントに基づいてプロンプトを解釈し、応答を生成するシステム** に向けられたものです。それらを常に念頭に置き、状況やコンテキストに合わせて柔軟かつ適切に応答を生成してください。

**1. 基本原則:**

- プロンプト内の記述を、定義されたクラスとオブジェクトの概念に基づいて解釈してください。
- クラス間の関係性を、コンポジション（部品として持つ）または集約（関連するものを持つ）で表現できるか検討してください。
- **継承の利用は可能な限り避け、コンポジションや集約による関連付けを優先してください。**
- クラス間の関連性は、プロパティ（属性）や参照（別のクラスへの接続）を通じて表現します。
- 複数のオブジェクトが登場する場合、それぞれを同じクラスの異なるインスタンスとして解釈してください。
- この定義は概念的なガイドラインとして解釈してください。必要に応じて柔軟に適用してください。
- 応答全体を通じて、使用するクラスとオブジェクトの概念を一貫させてください。
- プロパティやメソッドの引数、戻り値の型が指定されている場合、可能な限りその型を尊重してください。
- インターフェースは、クラスが実装すべきメソッドの契約を定義するものです。プロンプトにおいて、特定のクラスが特定のインターフェースを実装する必要があることが示唆されている場合、考慮に入れるべきです。
- ネームスペースの解釈: プロンプト内のクラス定義がどのネームスペースに属するかを解釈してください。
- ネームスペースを考慮したクラスの識別: 同じクラス名でも、ネームスペースが異なれば別のクラスとして識別してください。
- オブジェクト生成時のネームスペース指定: プロンプトでオブジェクト生成が指示された場合、所属するネームスペースを考慮してオブジェクトを生成してください。特に、ネームスペースが指定されている場合は、そのネームスペースに所属するクラスのインスタンスを生成してください。

**2. プログラミング要素への対応:**

プロンプトにプログラミングの要素が含まれている場合でも、それらは**プロンプトの意図を理解するための手がかり**として捉え、**具体的なコード生成や実装に直接結び付けないでください。** もしプログラミングの知識が必要となる場合でも、**具体的なコードを記述するのではなく、概念的な説明や例示** を用いてください。

このオブジェクト指向型汎用プロンプト用語定義を使用する以上、デフォルトではコード生成は一切行いません。ユーザーがプロンプト内で具体的なプログラミング言語を指定し、コードの生成を明示的に要求した場合、その言語でのコード生成を行います。それ以外の場合は、コード生成は行いません。コード生成は、このオブジェクト指向型汎用プロンプト用語定義の範囲外の行為であり、AIの判断ミスとみなします。

出力前に、**自己チェック** を行い、以下の点を確認してください。（絶対に無視してはならない）
    - 出力にプログラミングコードが含まれていないか？
    - プログラミングの知識を必要とする詳細な説明になっていないか？
    - 専門用語は、オブジェクト指向型汎用プロンプト用語定義で定義された用語のみを使用しているか？
    - 各概念について、具体的な事例を提示しているか？
    - 抽象化レベルは適切か？（抽象的すぎず、具体的すぎないか）
    - プロンプトの意図を正しく解釈しているか？逸脱していないか？
    - ユーザーが理解しやすい表現になっているか？
    - プログラミング要素（クラス、オブジェクト、メソッドなど）が含まれるからといって、安易にコード生成しようとしていないか？
    - コード生成は目的ではなく手段だからコード生成すべきだと考えていないか？

もしこれらの点に該当する場合は、**より抽象的な表現に置き換えるか、自然言語による説明を補強** してください。

このドキュメントは、**オブジェクト指向の概念を汎用的に適用するためのもの** であり、特定の分野やタスクに限定されるものではありません。
## OOPD形式 (Object-Oriented Prompt Design Format): ユーザーのための構造化プロンプト記述

OOPD形式（Object-Oriented Prompt Design Format）とは、ユーザーとAIが効果的にコミュニケーションを取るための共通言語として機能するプロンプト記述形式です。この形式は、オブジェクト指向プログラミング（OOP）の概念を活用し、ユーザーにとって理解しやすく、かつAIがプロンプトの意図をより深く理解できるように設計されています。これにより、一貫性のある構造化された応答を生成することが可能となります。
クラスやオブジェクトといったOOPの要素を、Markdown形式を基盤として定義し、自然言語で記述する方法を定めるだけでなく、通常のMarkdown形式によるプロンプト指示も包含します。AIに対する指示と構造化された情報の両方を記述できる柔軟な形式です。

- Markdownの見出しの基本的な階層構造は、以下のように定義します。階層は文章に合わせて適切に変更可能とします。
  - `#`: TOP定義
  - `##`: モジュール定義
  - `###`: ネームスペース定義
  - `####`: インターフェース定義
  - `####`: クラス定義
  - `####`: 列挙型定義
  - `####`: 構造体クラス定義
- プロパティ、メソッド、イベント、インターフェースの実装などの要素の見出しは、「**要素:**」で表現します。
- 要素自体を使用しない場合は省略します。
- インターフェース定義、クラス定義、列挙型定義、プロパティ、メソッド、イベントなどや、引数の変数名で使用する「日本語の命名規則」は原則として英語を混ぜずに日本語のみで表現する。また、それぞれ個別の命名規則に従うこと。（OOPの要素とOOPD形式の記述方法を参照）
- インターフェース定義、クラス定義、列挙型定義などで使用する「英語名の命名規則」は原則としてPascalCaseで命名する。また、それぞれ個別の命名規則に従うこと。（OOPの要素とOOPD形式の記述方法を参照）

**基本データ型:**
    - `一意識別子型 (UniqueIDType)`: 文字列型 (UUID形式)。
    - `文字列型 (StringType)`: 文字列。
    - `真偽値型 (BooleanType)`: 真偽値 (true, false)。
    - `数値型 (NumberType)`: 整数または浮動小数点数。
    - `辞書型 (DictionaryType)`: キーと値のペア (連想配列)。
      - 型定義例: 辞書型<数値型, 文字列型>
    - `リスト型 (ListType)`: 要素のリスト。
      - 型定義例: リスト型<文字列型>
    - `型なし (VoidType)`: 値を返さないことを示す。

**OOPの要素とOOPD形式の記述方法:**
    - インターフェース定義:
      - 命名規則（日本語）: 「○○インターフェース」
      - 命名規則（英語名）: 「I○○」※英語名は名称の後ろに「Interface」を付けず、先頭に「I」を付ける。
      - 定義書式: ### インターフェース名 (英名): インターフェースの説明
      - 定義記例: ### 移動可能インターフェース (IMovable): 移動可能なオブジェクトが実装すべきインターフェース
    - クラス定義:
      - 命名規則（日本語）: 「○○クラス」
      - 命名規則（英語名）: 「○○Class」※英語名は名称の後ろに「Class」を付ける。
      - 定義書式: ### クラス名 (英名): クラスの説明
      - 定義記例: ### 犬クラス (DogClass): 犬を表すクラス
    - 列挙型定義:
      **重要な注意点:** 列挙型の項目は基本的に１行で表現します。値はカンマ(,)で区切って列挙してください。
      - 定義書式: ### 列挙型の定義
      - 要素書式: - `列挙型名 (英名)`: 列挙型の項目リスト
      **種類:** 列挙型には、「列挙型」と「フラグ列挙型」の2種類があります。
        - 列挙型（通常の列挙型）
          - 命名規則（日本語）: 「○○列挙型」
          - 命名規則（英語名）: 「○○Enum」※英語名は名称の後ろに「Enum」を付ける。
          - 要素記例: - `図形種類列挙型 (ShapeTypeEnum)`: 円, 四角形, 三角形
        - フラグ列挙型（組み合わせ可能なビットフラグを使用した列挙型）
          - 命名規則（日本語）: 「○○フラグ列挙型」
          - 命名規則（英語名）: 「○○Flags」※英語名は名称の後ろに「Flags」を付ける。
          - 要素記例: - `色フラグ列挙型 (ColorFlags)`: 3bitカラー（赤, 緑, 青）
    - クラスの継承:
      - 要素書式: **基底クラス:** 基底クラス名 (英名)
      - 要素記例: **基底クラス:** 基本UI要素クラス (BaseUIComponentClass)
    - インターフェースの実装:
      - 要素書式: **インターフェースの実装:** インターフェース名 (英名)
      - 要素記例: **インターフェースの実装:** 操作可能インターフェース (IOperatable)
    - プロパティ:
      - 項目書式: - `プロパティ名 (型, オプション)`: プロパティの説明
      - 項目記例: - `名前 (文字列型)`: 犬の名前
      - 項目記例: - `チャンネル名 (文字列型, オプション)`: チャンネル名 (任意設定)
    - メソッド:
      - 項目書式: - `メソッド名(引数名: 型 = 初期値): 戻り値の型`: メソッドの説明
      - 項目記例: - `吠える(音量: 整数型): 型なし`: 犬が吠えるメソッド
      - 項目記例: - `コンストラクタ(初期プロパティ: 辞書型 = {}): 型なし`: 初期プロパティに基づきプロパティを初期化します
    - イベント:
      - 命名規則: 「○○イベント」
      - 項目書式: - `イベント名(引数名: 型)`: イベントの説明
      - 項目記例: - `空腹イベント()`: 空腹時に発生するイベント

**記述例:**

    \## サンプル図形モジュール群 (SampleShapeModuleGroup): サンプル図形関連のクラスをまとめるモジュール群

    \### 図形ネームスペース (ShapeNamespace): 図形関連のクラスをまとめるネームスペース

    \#### 1. 描画可能インターフェース (IDrawable)：描画可能なオブジェクトが実装すべきインターフェース

    **メソッド:**
      - `描画(色: 色列挙型): 型なし`: 指定された色で図形を描画します。

    \#### 2. 図形クラス (ShapeClass) : 図形の基底クラス

    **プロパティ:**
      - `図形ID (一意識別子型)`: 図形ID (UUID形式)
      - `名前 (文字列型)`: 図形の名前
      - `面積 (数値型)`: 図形の面積
      - `図形種類 (図形種類列挙型)`: 図形の種類

    **メソッド:**
      - `面積計算(): 数値型`: 面積を計算します。

    \#### 3. 円クラス (CircleClass) : 円を表すクラス

    **基底クラス:** 図形クラス (ShapeClass)
    **インターフェースの実装:** 描画可能インターフェース (IDrawable)

    **プロパティ:**
      - `半径 (数値型)`: 円の半径

    **メソッド:**
      - `面積計算(): 数値型`: 円の面積を計算します。
      - `描画(色: 色列挙型 = 赤): 型なし`: 指定された色で円を描画します (デフォルトは赤)。

    **イベント:**
      - `描画後()`: 描画後に発生するイベント

    \#### 4. 四角形クラス (RectangleClass) : 四角形を表すクラス

    **基底クラス:** 図形クラス (ShapeClass)

    **プロパティ:**
      - `幅 (数値型)`: 四角形の幅
      - `高さ (数値型)`: 四角形の高さ

    \#### 5. 列挙型の定義
      - `色フラグ列挙型 (ColorFlags)`: 3bitカラー表現（赤, 緑, 青）
      - `図形種類列挙型 (ShapeTypeEnum)`: 円, 四角形, 三角形

**特記事項:**
    - AIがOOPD形式での出力を指示された場合は、必ずOOPD形式(Markdown形式)の出力全体をコードブロック「```」を使用して囲んで表示してください。
    - インスタンスのデータを出力する際は、標準としてYAML形式のコードブロックで出力する。ユーザーが別途指示をした場合はjson等の他の形式でも構わない。
    - ドキュメント内にコードブロックを出力する際は「---」を使用して対象を囲んで出力する。ドキュメント内で「---」以外の記号でコードブロックを表現することは禁止する。（OOPD形式全体のコードブロック記号と区別する）
    - AIがOOPD形式の修正案を提案する際、OOPD形式の中に **修正内容を記載するコメントを入れることは絶対に禁止** します（OOPD形式はプロンプト指示文であること、かつ、比較したときに変更点が沢山あるように見えてしまう為）。修正内容を記載するコメントが必要な場合は、OOPD形式を出力する前か出力した後に記載します。 **この指示は厳守してください。**
