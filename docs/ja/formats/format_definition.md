### OOPD形式: 定義フォーマット (Definition Format) 仕様

#### 定義フォーマットとは

定義フォーマットは、OOPDに基づいて作成された定義を、**他者と共有したり、異なるセッションや環境で再利用したりするための、厳格で正式な記述形式**です。定義の確定版であり、言語間での**可逆性**と解釈の**一貫性**を保証することを目的とします。

#### このドキュメントについて

このドキュメント (`format_definition.md`) は、定義フォーマットに特有の厳格なルールについて説明します。共通のルールについては `format_common.md` を参照してください。定義フォーマットは、プロンプトの記述言語に関わらず、以下のルールに従う必要があります。

#### 必須ルールと書式

- **英語ハブ名の併記（英語以外の言語）:**
  - **（注意: このルールは英語以外の言語で記述する場合に適用されます。英語で記述する場合は、英語名のみを使用し、ハブ名の併記は不要です。`english_specification.md` を参照してください。）**
  - クラス名、インターフェース名、列挙型名など、AIによる翻訳対象となる「翻訳用語」については、**必ず確定した英語ハブ名を併記**する必要があります。詳しくは以下の個別の記述方法を参照してください。
  - 英語ハブ名は、`english_specification.md` で定義された**英語命名規則**に従います。
  - 翻訳用語の母国語表記は、対象言語の翻訳ルール (`translation_rules/` 内) で定義された**標準命名規則**に従います。

- **厳密な命名規則の適用:**
  - 上記の通り、母国語名と英語ハブ名の両方について、それぞれの言語で定義された**標準命名規則を厳密に適用**する必要があります。（英語で記述する場合は、`english_specification.md` で定義された英語命名規則のみが適用されます。）
  - モジュール名は、`english_specification.md` で定義された英語命名規則に従い、グローバルな一意性を確保することが強く推奨されます。

- **英語ハブ名と母国語名の認識:**
  - AIは、定義に `{英語ハブ名}::{母国語名}` の形式で併記されている要素について、**英語ハブ名と母国語名の両方を、その要素を指す有効な識別子として認識**します。

- **クロス参照:**
  - **同一モジュール内:** 参照したいクラス名などを、**必ず母国語名のみ**で記述します (例: `プロパティ名: 顧客クラス`)。英語ハブ名は記述しません。AIは文脈からモジュール内の定義を特定します。
  - **異なるモジュール:** 参照したいクラス等が別のモジュールに属する場合、**必ず完全修飾名 (`モジュール名.クラス名`)** で指定する必要があります。型指定の場合も同様です。（例: `作成者 (com.example.common.User)`）

- **説明文の推奨:**
  - 各モジュール、セクション、クラス、インターフェース、メソッド、プロパティなどには、その目的や意味を明確にするための**説明文を記述することを強く推奨**します。AIの解釈補助や人間による理解促進に役立ちます。説明文はプロンプト記述言語で記述します。

- **モジュール定義 (`##`):**
  - 全ての定義は必ずモジュール内に記述する必要があります。
  - 書式: `## {英語モジュール名}`
  - モジュール名はグローバルな一意性が推奨されます (`english_specification.md`参照)。
  - モジュールの母国語名や詳細な説明文は、`##` 行の下に通常のテキストとして記述できます（オプション）。

- **見出し (クラス `####`, インターフェース `####`, セクション `###`/`####`/..., 構造体定義 `####`, 列挙型定義 `####`):**
  - **クラス/インターフェース (個別定義):**
    - 書式 (母): `{見出しレベル} {母国語名} ({英語ハブ名}): {タイトル要約}`
    - 書式 (英): `{見出しレベル} {英語名}: {タイトル要約}`
    - **【重要】名前の順序は `{母国語名} ({英語ハブ名})` または `{英語名}` です。逆にならないように注意してください。**

    - **【1. タイトル要約 (見出し行 `:` の後)】**
      - **役割:** 見出しの一部として、クラス/インターフェースの **核心的な存在意義を一言で示すタイトル的な要約** です。
      - **内容:** その要素が **「何であるか」** を最も端的に表現します。具体的な機能リストや詳細な文脈は含めません。
      - **必須性:** **必須** です。
      - **長さ:** **極めて簡潔** である必要があります。原則として **一行かつ短文** で記述します。
      - **AI生成時の注意:** AIは、この要素の本質を捉えた、最も簡潔で的確な表現を生成してください。冗長な説明や、下の詳細説明に書くべき内容を含めないでください。また、 **見出しの為、行末に句点を付けるべきではありません。** これは各言語に合わせて判断が必要です。
      - **良い例:**
        - `ECサイトの顧客データモデル`
        - `非同期タスク実行コントラクト`
        - `環境設定値プロバイダ`
        - `3Dオブジェクト幾何学変換`
      - **悪い例:**
        - `ECサイトの顧客プロファイルと注文履歴を管理するクラス` (← 少し長い、詳細説明向き)
        - `顧客クラスです` (← 意味がない)
        - 省略する (← 必須)

    - **【2. 詳細説明文 (見出し行の下)】**
      - **役割:** 見出しとは独立した **本文** として、クラス/インターフェースの **目的、機能、利用方法、制約、背景、関連情報などを詳しく説明** する場所です。
      - **内容:**
        - 具体的な機能や責任範囲
        - 想定される利用シナリオ
        - 設計上の判断や背景
        - 重要な制約や注意点 (例: スレッドセーフティ、パフォーマンス考慮事項)
        - 関連する他のクラスやインターフェースへの言及
        - 外部ドキュメントへの参照
        - AIへの特別な指示（例: 「このクラスのメソッドは冪等性を保証すること」）
      - **必須性:** **任意** ですが、クラス/インターフェースの理解を深めるために **強く推奨** されます。特に複雑な要素や重要な要素には記述すべきです。
      - **形式:** 通常のMarkdownテキストとして、複数行にわたり自由に記述できます。リスト、強調、コードブロック (` ``` `) なども使用可能です。
      - **AI生成時の注意:** AIは、要素の理解に必要な情報を、構造的かつ分かりやすく記述してください。タイトル要約で記述した内容を単に繰り返すのではなく、より詳細な情報を提供する必要があります。

      ```markdown
      記述例 (日本語):
      #### 顧客クラス (Customer): ECサイトの顧客データモデル。

      このクラスは、ECサイトにおける顧客の基本情報（氏名、連絡先）、配送先住所リスト、および過去の注文履歴（直近100件）を一元的に管理します。
      データの整合性を保ち、関連サービス（推奨エンジン、サポートシステム）へ最新の情報を提供することが主な責務です。
      個人情報保護の観点から、メールアドレス等の機密情報へのアクセスは厳格に制御されます。
      インスタンス生成時には、必須項目（氏名、メールアドレス）のバリデーションを実行してください。
      ```

      ```markdown
      記述例 (英語):
      #### Customer: E-commerce site customer data model.

      This class centrally manages customer base information (name, contact), shipping address list, and past order history (latest 100) in the e-commerce site.
      Its primary responsibility is to maintain data integrity and provide up-to-date information to related services (e.g., recommendation engine, support system).
      Access to sensitive information like email addresses is strictly controlled due to privacy concerns.
      Validate required fields (name, email) upon instance creation.
      ```

    *(`Class`, `Interface` の基本用語定義は `basic_terms.md` 参照)*

  - **セクション (Section):**
    - Markdownの見出し (`###`, `####`, `#####` など) を使用して定義します。
    - 書式: `{見出しレベル} {母国語名} ({英語ハブ名})` または `{見出しレベル} {母国語名} ({英語ハブ名}): {説明文}`
    - **説明文は省略可能**です。
    - **英語が母国語の場合:** `{英語名}` のみとなり、英語ハブ名の括弧は不要です。説明文のルールは上記と同様です。
    - `format_common.md` のルールに従い、複数階層（ネスト）も可能です。
    - **【重要】** クラス定義 (`#### {個別のクラス名}`)、インターフェース定義 (`#### {個別のインスタンス名}`)、`#### {構造体定義の固定名称}` グループ、`#### {列挙型定義の固定名称}` グループなどは、モジュール直下だけでなく、任意のレベルのセクション内に配置することができます。
    - **【制約】ただし、これらの定義要素（クラス、インターフェース、グループ見出し）は、必ずモジュール定義 (`##`) よりも下の階層（`###` 以下）に記述する必要があります。** トップレベルやモジュールと同じレベルには配置できません。（これは、複数の定義ファイルを結合した際の構造的な一貫性を保つためです。）

  - **`#### {構造体定義の固定名称}` / `#### {列挙型定義の固定名称}` (グループ見出し):**
    - `format_common.md` で参照が指示されている通り、**`basic_terms.md`** で定義された言語ごとの **固定名称の見出し**（例: 日本語では `#### 構造体定義`、英語では `#### Structure Definitions`）を使用します。
    - これらは、それぞれ構造体定義、列挙型定義をまとめるためのグループ見出しであり、任意で使用できます。
    - 個別の構造体定義や列挙型定義は、必ずこれらのグループ見出しの下にリスト形式 (`-`) で記述されます。
    - グループ見出しに英語ハブ名を `()` で併記する必要はありません。
    - グループ見出しの下に、必要であればグループ全体の説明文を記述できます。
      *(基本用語定義は `basic_terms.md` 参照)*

- **要素名 (プロパティ名、メソッド名、イベント名、列挙型定義名、列挙型値、構造体定義名):**
  - 母国語が「主」、英語ハブ名が「副」となります。
  - 英語ハブ名を**接頭辞**として、ダブルコロン `::` で母国語名に接続します。
  - 基本形式: `{英語ハブ名}::{母国語名}`
  - **（英語以外の言語の場合）** 上記の通りです。
  - **英語が母国語の場合:** 接頭辞 (`{英語ハブ名}::`) は不要です。`english_specification.md` のルールに従い、英語名のみを記述します。

- **リスト形式要素 (プロパティ、メソッド、イベント、列挙型、構造体) の定義:**
  - 行頭にMarkdownリストのハイフン `-` を付けます。

  - **リストの開始キーワード:** 各リスト（プロパティリストなど）を開始する際には、対応する **基本用語** をボールド表記で記述し、コロン `:` を付けます。使用する基本用語は **`basic_terms.md`** を参照してください。
    - 例 (日本語): `**プロパティ:**`, `**メソッド:**`, `**イベント:**`
    - 例 (英語): `**Property:**`, `**Method:**`, `**Event:**`

  - **バッククォート (\`\`\`) の適用範囲:**
    - (`format_common.md` 準拠)
    - **プロパティ、メソッド、イベント:** 定義の主要部分（ハイフン直後のスペース後から型/戻り値指定まで）**のみ** を囲みます。説明は囲みません。
    - **列挙型、構造体(個別定義):** 要素名の部分（`{英語ハブ名}::{母国語名}` または `{英語名}`）**のみ**を囲みます。説明や値リストは囲みません。

  - **【共通ルール】説明文と指示文の記述:**
    - 各要素定義（プロパティ、メソッド等）には、その目的、使い方、制約、指示などを説明文として記述できます。
    - 説明文は、定義行の末尾にあるコロン `:` の**後ろ**に記述するか、または**次の行以降**に記述します。
    - **複数行**にわたって記述することが可能です。
    - 説明文は**通常のMarkdownテキスト**として記述し、リスト (`-`, `*`, `1.`)、強調 (`**bold**`, `*italic*`)、などのMarkdown要素を含めることができます。
    - 定義行のコロン `:` の後に簡易説明を記述せず、次の行から詳細な説明を開始することもできます。
    - 説明文が短く済む場合は、出来るだけ１行で記載することを推奨します。
    - **注意:** 説明文の必須/任意は要素の種類によって異なります（構造体は必須、列挙型は任意）。詳細は各要素の定義ルールを参照してください。
    - **【説明文内の表記について（厳守・絶対禁止事項）】**
      - **1. バッククォート (\`\`\`) の絶対不使用:** 説明文の可読性、AIによる翻訳・解釈の精度を保証するため、説明文内での **インライン・バッククォートの使用は、いかなる理由があっても絶対に禁止します。** 他の定義要素（プロパティ名、メソッド名、型名、列挙値など）や技術的な用語に言及する場合も、バッククォートで囲まず、**必ず通常のテキストとして記述** してください。
      - **2. 英語併記の絶対禁止:** 説明文は、原則としてプロンプトの記述言語 **のみ** で記述してください。AIによる翻訳処理の精度と一貫性を致命的に損なうため、説明文内に `{英語ハブ名}::{母国語名}` 形式や括弧書き (`(englishName)`) などで **英語名を併記することは絶対に禁止します。** AIは、文脈から必要な情報を判断する能力を持つため、このような併記は不要かつ有害です。

      ```markdown
      記述例（プロパティの場合。他も同様）:
      **プロパティ:**

      *(最も推奨: 短い記載で済む場合)*
      - `propertyName1::プロパティ名1: Type`: これは一行で完結する説明です。

      *(推奨: 簡易説明に加え、詳細な説明が必要な場合)*
      - `propertyName2::プロパティ名2: Type`: ここに簡易説明を記述します。
        これは簡易説明に加え、複数行にわたる詳細な説明や指示の例です。
        - 詳細な仕様をリストで記述できます。
        - **重要:** この値は必ず正の数にしてください。

      *(詳細な説明や手順が多く必要な場合)*
      - `propertyName3::プロパティ名3: Type`:
        これは複数行にわたる説明や指示の例です。
        1. 詳細な仕様をリストで記述できます。
        2. 詳細な仕様をリストで記述できます。
        3. 詳細な仕様をリストで記述できます。
        4. 詳細な仕様をリストで記述できます。
        5. 詳細な仕様をリストで記述できます。
        6. 詳細な仕様をリストで記述できます。
        7. 詳細な仕様をリストで記述できます。
        8. 詳細な仕様をリストで記述できます。
        - **重要:** この値は必ず正の数にしてください。
      ```

      ```markdown
      記述例（列挙型の場合）:
      #### 列挙型定義

      *(最も推奨: 短い記載で済む場合)*
      - `ProcessingStatus::処理状態列挙型 = PENDING::待機中, RUNNING::実行中, COMPLETED::完了, FAILED::失敗`: 非同期処理の全体的な状態を示します。
      - `ColorFlag::色フラグ列挙型 = RED::赤, GREEN::緑, BLUE::青`: 基本的な色要素を表すビットフラグです。組み合わせて色を表現します (例: 紫 = 赤 + 青)。

      *(推奨: 簡易説明に加え、詳細な説明が必要な場合)*
      - `ErrorCode::エラーコード列挙型 = NONE::エラーなし, TIMEOUT::タイムアウト, INVALID_INPUT::不正な入力, SERVER_ERROR::サーバーエラー, UNKNOWN::不明なエラー`:
        処理が失敗状態になった場合の具体的な原因を示します。
        - タイムアウト: 規定時間内に処理が完了しなかった場合に設定されます。ネットワーク状況を確認してください。
        - 不正な入力: 入力データ形式が正しくないか、必須項目が欠落している場合に発生します。入力仕様書を参照してください。
        - サーバーエラー: サーバー内部で予期せぬ問題が発生しました。管理者に連絡してください。ログIDを併せて伝えると調査がスムーズです。

      *(説明がなくとも一般的に理解可能な場合)*
      - `Direction::方向列挙型 = NORTH::北, SOUTH::南, EAST::東, WEST::西`
      - `Size::サイズ列挙型 = SMALL::小, MEDIUM::中, LARGE::大`
      - `DayOfWeek::曜日列挙型 = MONDAY::月曜日, TUESDAY::火曜日, WEDNESDAY::水曜日, THURSDAY::木曜日, FRIDAY::金曜日, SATURDAY::土曜日, SUNDAY::日曜日`
      ```

- **プロパティ定義:**
  - 書式 (母): - \`{英語ハブ名}::{母国語名}: {型名}\[, {オプション指示子}]\`: {説明}
  - 書式 (英): - \`{英語名}: {型名}\[, {オプション指示子}]\`: {説明}
  - **型名:**
    - **標準型/拡張型:** 必ず英語表記 (`String`, `Number`, `List<String>`, `Color` など) を使用します (**定義は `basic_terms.md` および `extended_types.md` 参照**)。
    - **ユーザー定義型 (クラス、インターフェース、列挙型、構造体):** **【重要】必ず母国語名のみ**で参照します (例: `顧客クラス`, `色フラグ列挙型`)。英語ハブ名は記述しません。
  - **オプション項目:**
    - プロパティ定義では、型名の後に `, {オプション指示子}` を追記することで任意項目を示すことができます（オプション指示子の基本用語 **`Optional`** (`ja`: `オプション`) の定義は **`basic_terms.md`** 参照）。
      - 例 (日本語): - \`プロパティ名: String, オプション\`
      - 例 (英語): - \`propertyName: String, Optional\`
  - **説明:** 上記の **【共通ルール】説明文と指示文の記述** に従います。

- **メソッド定義:**
  - 書式 (母): - \`{英語ハブ名}::{母国語名}({引数リスト}): {戻り値型名}\`: {説明}
  - 書式 (英): - \`{英語名}({引数リスト}): {戻り値型名}\`: {説明}
  - **戻り値型名:** プロパティの型名ルールと同様です (標準型は英語、ユーザー定義型は母国語)。`Void` は省略可能ですが、**記載を推奨**します。
  - **引数リスト:** カンマ区切りで `{引数名}: {型名}` または `{引数名}: {型名} = {初期値}`。
  - **引数名:** 母国語表記のみを使用し、英語ハブ名は付与しません。（英語の場合は英語表記）
  - **引数の型名:** プロパティの型名ルールと同様です (標準型は英語、ユーザー定義型は母国語)。
  - **デフォルト値 (`= {初期値}`):**
    - メソッド定義では、引数の型名の後に `= {初期値}` を追記することでデフォルト値を表現できます。
    - **初期値の表記:**
      - リテラル (`True`, `False`, `Null`, 数値, 文字列) はそのまま記述します (**定義は `basic_terms.md` 参照**)。
      - **列挙型の値:** **【重要】必ず母国語名**で記述します (例: `= 赤`, `= 未着手`)。英語ハブ名は記述しません。（英語の場合は英語表記）
      - 例 (日本語): - \`メソッド名(フラグ: Boolean = True, ステータス: タスク状態 = 未着手): Void\`
      - 例 (英語): - \`methodName(flag: Boolean = True, status: TaskStatus = NOT\_STARTED): Void\` (※英語の場合は列挙値も英語)
  - **【重要】引数がない場合でも、必ず空の括弧 `()` を記述してください。** (例: `メソッド名()`)
  - **説明:** 上記の **【共通ルール】説明文と指示文の記述** に従います。

- **イベント定義:**
  - 書式 (母): - \`{英語ハブ名}::{母国語名}({引数リスト})\`: {説明}
  - 書式 (英): - \`{英語名}({引数リスト})\`: {説明}
  - **戻り値:** 通常 `Void` ですが、**記載の省略を推奨**します。
  - **引数リスト:** メソッド定義と同様のルールに従います。引数名、型名、初期値は母国語表記（英語の場合は英語表記）です。
  - **引数名:** メソッド定義と同様のルールに従います。引数名、型名、初期値は母国語表記（英語の場合は英語表記）です。
  - **【重要】引数がない場合でも、必ず空の括弧 `()` を記述してください。** (例: `イベント名()`)
  - **説明:** 上記の **【共通ルール】説明文と指示文の記述** に従います。

- **列挙型定義 (個別):**
  - 必ず `#### {列挙型定義の固定名称}` グループ見出しの下（またはその下のセクション内）に、**リスト形式 (`-`)** で記述します。
  - 書式 (母): - \`{英語ハブ名}::{母国語名} = {値リスト}\` \[: {説明}]
  - 書式 (英): - \`{英語名} = {値リスト}\` \[: {説明}]
  - **区切り記号:** 列挙型名と値リストの間は `=` (イコール) で区切ります。
  - **値リスト:** カンマ区切りで `{英語ハブ名}::{母国語名}`（または英語のみ）形式の値を列挙します。値の間にスペースを入れることを推奨します (例: `RED::赤, GREEN::緑`)。
  - バッククォート: バッククォート (\`) は、ハイフン直後のスペースの後から始まり、**値リストの最後まで**を囲みます。説明文は囲みません。
  - **説明:** コロン `:` の後ろに説明を記述できます（**任意**）。上記の **【共通ルール】説明文と指示文の記述** に従います。

- **構造体定義 (個別):**
  - 必ず `#### {構造体定義の固定名称}` グループ見出しの下（またはその下のセクション内）に、**リスト形式 (`-`)** で記述します。
  - 書式 (母): - \`{英語ハブ名}::{母国語名}\`: {説明}
  - 書式 (英): - \`{英語名}\`: {説明}
  - **説明:** コロン `:` の後ろに説明を記述します（**必須**）。上記の **【共通ルール】説明文と指示文の記述** に従います。

  **構造体の利用指針**
  - **単純なデータコンテナ推奨:** 構造体は、`座標構造体` のような、AIが名称と説明文から内容を推測できる単純なデータ保持の用途を推奨します。
  - **明示的な定義は非推奨:** クラスのように `**プロパティ:**` 等で要素を明示的に定義することは **強く非推奨** です。
  - **推奨される指定:** 必要なプロパティは、構造体の**説明文内に自然言語で記述**してください (例: 「座標構造体は、X座標とY座標を持ちます」)。AIはこの指示を優先します。

    ```markdown
    記述例（構造体の場合）:
    #### 構造体定義

    *(最も推奨: 短い記載で済む場合)*
    - `RgbColor::Rgb色構造体`: RGB形式の色情報 (赤、緑、青の各値、通常 0-255) を保持します。アルファ値は含みません。
    - `VersionInfo::バージョン情報構造体`: ソフトウェアやコンポーネントのバージョン番号（メジャー、マイナー、パッチ）を格納します。

    *(推奨: 簡易説明に加え、詳細な説明が必要な場合)*
    - `RenderingOptions::描画オプション構造体`: レンダリング時の詳細設定をまとめた構造体です。
      このオプション設定は、リアルタイムレンダリングパイプライン全体に影響します。
      特にアンチエイリアスレベルとテクスチャ品質はパフォーマンスに大きく関わるため、ターゲット環境に応じて慎重に設定してください。
      デフォルト設定については、別ドキュメント「デフォルト描画設定」を参照してください。

    *(プロパティを自然言語で記載する場合)*
    - `Point::座標構造体`: 2次元空間における点の位置を表します。X座標とY座標の2つの数値を持ちます。座標系の原点は左上とします。
    - `Address::住所構造体`: 住所情報を構成する要素を保持します。郵便番号、都道府県、市区町村番地を持ち、オプションで建物名部屋番号を持つことができます。

    *(強く非推奨: プロパティを明確に記載する場合。クラスの使用を検討してください)*
    - `Size::寸法構造体`: オブジェクトの幅と高さを表します。 *(注意: 非推奨の記述方法です。クラスの使用を検討してください)*
      単位はピクセルを基本とします。

      **プロパティ:**
      - `width::幅: Number`: オブジェクトの横幅。
      - `height::高さ: Number`: オブジェクトの縦幅。
    ```

  - **クラスの利用:** プロパティやメソッドの詳細な定義が必要な場合は、構造体ではなく **クラス (`Class`) を使用** してください。

- **基底クラスとインターフェースの実装:**
  - クラス定義内で、実装する基底クラスやインターフェースを示すには、対応する **基本用語** をボールド表記で使用します。使用する基本用語は **`basic_terms.md`** を参照してください。
  - **継承:**
    - 書式 (日本語例): `**基底クラス:** {基底クラスの母国語名}` (キーワードは `baseclass` の基本用語)
    - 書式 (英語例): `**baseclass:** {BaseClassName}` (キーワードは `baseclass` の基本用語)
    - **【重要】必ず母国語名のみで参照してください。**
  - **インターフェース実装:**
    - 書式 (日本語例): `**インターフェース:** {インターフェース1の母国語名}, {インターフェース2の母国語名}, ...` (キーワードは `Interface` の基本用語)
    - 書式 (英語例): `**Interface:** {InterfaceName1}, {InterfaceName2}, ...` (キーワードは `Interface` の基本用語)
    - **【重要】必ず母国語名のみで参照してください。** 複数指定する場合はカンマ区切りです。

- **型の参照:**
  - プロパティや引数、戻り値で型を指定する際、ユーザー定義クラスや列挙型を参照する場合も、**母国語名のみ**を記述し、英語ハブ名は付けません。

- **記述例:**

    ```markdown
    記述例（日本語での定義全体の例）:
    ## com.example.shapes

    このモジュールは、基本的な図形とその操作に関連する定義を含みます。

    ### 定義グループ

    #### 列挙型定義

    - `ShapeType::図形種類列挙型 = CIRCLE::円, RECTANGLE::長方形, TRIANGLE::三角形`: 図形の基本的な種類を示します。
    - `ColorType::色列挙型 = RED::赤, BLUE::青, GREEN::緑, BLACK::黒, WHITE::白`: 図形の色を表します。

    #### 構造体定義

    - `Coordinate::座標構造体`: 2次元空間における点の位置を表します。X座標とY座標の2つの数値を持ちます。

    ### インターフェース定義

    #### 描画可能インターフェース (Drawable): 図形が描画可能であることを示すコントラクト

    このインターフェースを実装するクラスは、自身を描画する機能を持つ必要があります。

    **メソッド:**

    - `draw::描画実行(): Void`: 図形を描画します。具体的な描画処理は実装クラスに依存します。

    ### 基底クラス定義

    #### 基本図形クラス (BaseShape): 全ての図形の基底となるクラス

    図形に共通する基本的なプロパティを提供します。

    **プロパティ:**

    - `id::識別子: UniqueID`: 図形を一意に識別するためのIDです。
    - `creationTime::作成日時: Instant`: この図形オブジェクトが作成された日時（ISO8601形式）です。
    - `shapeType::図形種別: 図形種類列挙型`: 図形の種類を示します。

    ### 図形クラス定義

    #### 円クラス (Circle): 円形を表す図形クラス

    **基底クラス:** 基本図形クラス
    **インターフェース:** 描画可能インターフェース

    このクラスは円を表現し、中心座標と半径を持ちます。基本的な図形操作メソッドを提供します。

    **プロパティ:**

    - `center::中心座標: 座標構造体`: 円の中心点の座標です。
    - `radius::半径: Number`: 円の半径です。負の値は許可されません。
    - `color::色: 色列挙型`: 円を塗りつぶす色です。
    - `isDrawn::描画済みフラグ: Boolean`: 円が既に描画されたかどうかを示すフラグです。
    - `lineStyle::線種: String, オプション`: 円の輪郭線のスタイル（例: 実線、破線）を指定します。指定がない場合はデフォルトの線種が使用されます。
    - `attributes::属性辞書: Dictionary<String, Any>`: 円に関する追加のカスタム属性を格納します。キーは文字列、値は任意型です。
    - `relatedShapes::関連図形リスト: List<UniqueID>`: この円に関連する他の図形の識別子リストです。

    **メソッド:**

    - `calculateArea::面積計算(): Number`: 円の面積を計算して返します。
    - `move::移動(移動先座標: 座標構造体): Void`: 円の中心座標を指定された新しい座標に移動します。
    - `resize::リサイズ(倍率: Number = 1.0): Boolean`: 円の半径を指定された倍率で変更します。成功した場合は真を返します。デフォルト倍率は1.0（変更なし）です。
    - `setColor::色設定(新しい色: 色列挙型 = 赤): Void`: 円の色を指定された新しい色に設定します。デフォルトは赤です。
    - `draw::描画実行(): Void`: 円を描画します。描画可能インターフェースの実装です。描画後、描画済みフラグを真にします。

    **イベント:**

    - `click::クリックイベント()`: 円がクリックされたときに発生します。
    - `sizeChanged::サイズ変更イベント(新半径: Number)`: 円のサイズ（半径）が変更されたときに発生します。新しい半径を引数として渡します。
    - `colorChanged::色変更イベント(旧色: 色列挙型, 新色: 色列挙型)`: 円の色が変更されたときに発生します。変更前の色と変更後の色を引数として渡します。

    ```

    ```markdown
    記述例（英語での定義全体の例）:
    ## com.example.shapes

    This module contains definitions related to basic shapes and their operations.

    ### Definition Groups

    #### Enum Definitions

    - `ShapeType = CIRCLE, RECTANGLE, TRIANGLE`: Indicates the basic types of shapes.
    - `ColorType = RED, BLUE, GREEN, BLACK, WHITE`: Represents the color of a shape.

    #### Structure Definitions

    - `Coordinate`: Represents the position of a point in 2D space. It holds two numeric values: X coordinate and Y coordinate.

    ### Interface Definitions

    #### Drawable: Contract indicating that a shape can be drawn

    Classes implementing this interface must have the capability to draw themselves.

    **Method:**

    - `draw(): Void`: Draws the shape. The specific drawing process depends on the implementing class.

    ### Base Class Definitions

    #### BaseShape: Base class for all shapes

    Provides fundamental properties common to all shapes.

    **Property:**

    - `id: UniqueID`: A unique identifier for the shape.
    - `creationTime: Instant`: The date and time (ISO8601 format) when this shape object was created.
    - `shapeType: ShapeType`: Indicates the type of the shape.

    ### Shape Class Definitions

    #### Circle: Shape class representing a circle

    **baseclass:** BaseShape
    **Interface:** Drawable

    This class represents a circle and holds its center coordinates and radius. It provides basic shape manipulation methods.

    **Property:**

    - `center: Coordinate`: The coordinates of the center point of the circle.
    - `radius: Number`: The radius of the circle. Negative values are not allowed.
    - `color: ColorType`: The color used to fill the circle.
    - `isDrawn: Boolean`: A flag indicating whether the circle has already been drawn.
    - `lineStyle: String, Optional`: Specifies the style of the circle's outline (e.g., solid, dashed). If not specified, a default line style is used.
    - `attributes: Dictionary<String, Any>`: Stores additional custom attributes related to the circle. Keys are strings, values are of any type.
    - `relatedShapes: List<UniqueID>`: A list of identifiers for other shapes related to this circle.

    **Method:**

    - `calculateArea(): Number`: Calculates and returns the area of the circle.
    - `move(destination: Coordinate): Void`: Moves the center of the circle to the specified new coordinates.
    - `resize(scaleFactor: Number = 1.0): Boolean`: Changes the radius of the circle by the specified scale factor. Returns true on success. The default scale factor is 1.0 (no change).
    - `setColor(newColor: ColorType = RED): Void`: Sets the color of the circle to the specified new color. The default is red.
    - `draw(): Void`: Draws the circle. Implementation of the Drawable interface. Sets the isDrawn flag to true after drawing.

    **Event:**

    - `Click()`: Occurs when the circle is clicked.
    - `SizeChanged(newRadius: Number)`: Occurs when the size (radius) of the circle is changed. Passes the new radius as an argument.
    - `ColorChanged(oldColor: ColorType, newColor: ColorType)`: Occurs when the color of the circle is changed. Passes the old color and the new color as arguments.

    ```

#### 出力ルール

- AIが「定義フォーマット」で出力を指示された場合は、**必ずOOPD形式(Markdown形式)の出力全体をコードブロック「（`~~~Markdown`） ... （`~~~`）」を使用して囲んで表示**してください。（ただし、OOPD形式内のコードブロックは「(` ``` `)」を使用して囲みます）
- インスタンスのデータを出力する際は、標準として **YAML形式のコードブロック「(` ```yaml `) ... (` ``` `)」** で出力します。ユーザーが別途指示をした場合はJSON等の他の形式でも構いません。

#### 定義フォーマットの確定プロセス

- 通常、「定義フォーマット」は、ユーザーが「ユーザーフォーマット」で作成した内容を基に、AIに生成を指示します。
- AIは生成時に、上記の必須ルール（英語名併記、命名規則、モジュール所属など）への準拠を自動チェックします。
- チェックで問題が見つかった場合（例: 命名規則違反、英語名不明瞭、モジュール未定義など）、AIはユーザーに問題点を指摘し、修正を促します。AIが修正案を提示する場合もあります。
- ユーザーがAIとの対話を通じて問題を解消し、内容を確認・承認することで、「定義フォーマット」が確定します。
